<!DOCTYPE html>
<html>
  <head>
    <title>Butikken</title>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"
    ></script>
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
  </head>

  <body>
    <header>
      <!-- I stedet for at oprette en klassisk button så bruger jeg "href" til at linke til en "ny side" -->
      <!-- Dette gøres for alle user knapperne (delete, logout og update) -->
      <h1>Butikken</h1>
      <p>Velkommen til butikken, vi sælger mange forskellige varer: Blandt andet Biler, Mobiltelefoner, Tøj og Gryder</p>
    </header>
    <!-- Det gøres også for varer knapperne som skal bruges, altså det link som skal kunne oprette varer) -->
    <!-- Også det link som viser alle varerne i en liste, og som skal gøre det muligt at slette disse produkter -->
    <section class="gray">
      <% if (auth == true) {%>
      <a href="/profile">Redigere/slet</a> - 
      <a href="/logout">Log ud</a>
      <% } else { %>
        <a href="/login">Login</a>
        <% } %>
    </section>
    <% if (auth == true) {%>
          <section>
        <button type="button" class="new"><a href="/ad/new">Tilføj Produkt</a></button>
    </section>
    <% } %>
    <section class="silver">

          Kategorier: <% for(var i=0; i < categories.length; i++) { %>
          <!-- jeg laver links til mine kategorier, via "a href" så påfører jeg en onclick function
          tilføjer function "filterByCategory" og en parameter inde i den funktion '<%= categories[i] %>'
        og det gør vi grundet templatesproget og så er selve funktionen linje 36 og 37  -->
          <a href="#" onClick="filterByCategory('<%= categories[i].Category %>')"
            ><%= categories[i].Category %></a
          > - 
          <% } %>
          <a href="#" onClick="filterByCategory('')">Vis alle</a>
  <!-- opretter script tags og skriver jquerykode deri  -->
          <script>
            function filterByCategory(cat) {
              $("tbody tr").show();
              $("tbody tr")
                .not("." + cat)
                .hide();
            }
          </script>
        </section>          
        <table id="ads">
          <thead>
            <tr>
              <th>Navn</th>
              <th>Pris</th>
              <th>Kategori</th>
              <th>Billeder</th>
              <% if (auth == true) {%>
                              <th></th>
                              <% } %>
            </tr>
          </thead>
          <tbody>
            <% for(var i=0; i < Ads.length; i++) { %>
            <tr class="<%= Ads[i].Category %>">
              <td><%= Ads[i].Title %></td>
              <td class="price"><%= Ads[i].Price %></td>
              <td><%= Ads[i].Category %></td>
              <td class="image"><img src="<%= Ads[i].Image %>"" class="image"</></td>
              <% if (auth == true) {%>
              <td>
                <a href="/ad/<%= Ads[i].Id %>/edit">redigere/slet</a>
              </td>
              <% } %>
            </tr>
            <% } %>
          </tbody>
        </table>
    </section>
  </body>
</html>
